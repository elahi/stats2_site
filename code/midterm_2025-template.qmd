---
title: "Midterm - 2025"
name: "Your name"
format: pdf
editor_options: 
  chunk_output_type: console
---

## The data

Load the data:

```{r load_data}
#| warning: false
library(rethinking)
library(tidyverse)
# Set the web address where R will look for files from this repository
repo_url <- "https://raw.githubusercontent.com/elahi/elahi.github.io/master/"
dat <- read.csv(paste(repo_url, "data/meps_2012_survey_data.csv", sep = ""))
glimpse(dat)
```

Transform the proportional cover of space so that we can model it using a normal distribution:

```{r}
# Define logit function
logit <- function(p) log(p / (1 - p))
dat <- dat %>% 
  mutate(space_logit = logit(space))
# Plot
par(mfrow = c(1,2))
hist(dat$space, main = "", xlab = "Space (proportion)")
hist(dat$space_logit, main = "", xlab = "Space (logit)")
```

Importantly, the response is no longer bounded between 0 and 1. It is *not* important that logit(space) appears normally distributed! It just so happens that this is the case here. For now, ignore the effect of site and transect. 

## Suggested workflow

You will skip the generative simulation for this exercise. Here is a suggested workflow:

1.  Visualize the data to make sense of the patterns
2.  Standardize the predictors
3.  Come up with sensible priors by plotting prior predictive distributions (see HW4-key or SR2 Fig 5.8 for example). Justify your choice of priors.
4.  Run the models using `ulam`. Diagnose your chains - what are the criteria you checked to ensure convergence? See SR2 9.4-9.5 for help. 
5.  Compare WAIC for the models.
6.  Interpret in the context of the DAG and the published results. 
7.  Plot the counterfactual effect of one predictor, holding any other predictors constant. Justify your choice of the model used for these posterior predictions. See SR2 Fig. 5.9 for example of a counterfactual plot from a multiple regression. Interpret. 

